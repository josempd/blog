default_install_hook_types:
  - pre-commit
  - commit-msg

repos:
  # --------------------------------------------------------------------------
  # Ruff — must match backend/pyproject.toml [tool.ruff] config
  # --------------------------------------------------------------------------
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.14.13
    hooks:
      - id: ruff-check
        args: [--config, backend/pyproject.toml]
        files: ^backend/
      - id: ruff-format
        args: [--check, --config, backend/pyproject.toml]
        files: ^backend/

  # --------------------------------------------------------------------------
  # ty — no official pre-commit hook yet, run via uv
  # --------------------------------------------------------------------------
  - repo: local
    hooks:
      - id: ty
        name: ty type check
        entry: uv run --directory backend ty check app
        language: system
        pass_filenames: false
        files: ^backend/.*\.pyi?$

  # --------------------------------------------------------------------------
  # uv lockfile consistency
  # --------------------------------------------------------------------------
  - repo: https://github.com/astral-sh/uv-pre-commit
    rev: 0.9.30
    hooks:
      - id: uv-lock
        args: [--directory, backend]
        files: ^backend/pyproject\.toml$

  # --------------------------------------------------------------------------
  # Conventional commits
  # --------------------------------------------------------------------------
  - repo: https://github.com/compilerla/conventional-pre-commit
    rev: v4.3.0
    hooks:
      - id: conventional-pre-commit
        stages: [commit-msg]
        args:
          - --force-scope
          - --scopes
          - project,repository,backend,all,blog,content
          - feat
          - fix
          - docs
          - chore
          - refactor
          - test
          - style
