{% extends "base.html" %}

{% block title %}{{ post.title }} &mdash; {{ site_title }}{% endblock %}
{% block description %}{% if post.excerpt %}{{ post.excerpt }}{% else %}{{ site_description }}{% endif %}{% endblock %}
{% block og_title %}{{ post.title }}{% endblock %}
{% block og_description %}{% if post.excerpt %}{{ post.excerpt }}{% else %}{{ site_description }}{% endif %}{% endblock %}
{% block og_type %}article{% endblock %}

{% block content %}
<article>
    <header class="page-header">
        <h1>{{ post.title }}</h1>
        <div class="post-meta">
            {% if post.published_at %}
            <time datetime="{{ post.published_at.isoformat() }}">{{ post.published_at.strftime('%b %d, %Y') }}</time>
            {% endif %}
        </div>
    </header>

    {% if toc and toc | length > 1 %}
    <nav class="post-toc" aria-label="Table of contents">
        <h2>Contents</h2>
        <ol>
            {% for entry in toc %}
            <li class="toc-level-{{ entry.level }}">
                <a href="#{{ entry.id }}">{{ entry.text }}</a>
            </li>
            {% endfor %}
        </ol>
    </nav>
    {% endif %}

    <div class="prose post-body">
        {{ post.content_html | safe }}
    </div>

    {% if post.tags %}
    <nav class="post-tags" aria-label="Post tags">
        {% for tag in post.tags %}
        <a href="/blog?tag={{ tag.slug }}" class="tag" rel="tag">{{ tag.name }}</a>
        {% endfor %}
    </nav>
    {% endif %}
</article>
{% endblock %}
